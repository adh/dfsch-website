<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>dfsch: dfsch/util.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>dfsch/util.h File Reference</h1><code>#include &lt;<a class="el" href="strings_8h_source.html">dfsch/strings.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="defines_8h_source.html">dfsch/defines.h</a>&gt;</code><br>
<code>#include &lt;stdint.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;stdarg.h&gt;</code><br>
<code>#include &lt;pthread.h&gt;</code><br>

<p>
<div class="dynheader">
Include dependency graph for util.h:</div>
<div class="dynsection">
<p><center><img src="dfsch_2util_8h__incl.png" border="0" usemap="#dfsch/util.h_map" alt=""></center>
<map name="dfsch/util.h_map">
<area shape="rect" href="strings_8h.html" title="dfsch/strings.h" alt="" coords="280,84,395,111"><area shape="rect" href="defines_8h.html" title="dfsch/defines.h" alt="" coords="655,239,772,265"><area shape="rect" href="dfsch_8h.html" title="dfsch/dfsch.h" alt="" coords="285,161,389,188"><area shape="rect" href="number_8h.html" title="dfsch/number.h" alt="" coords="511,239,631,265"><area shape="rect" href="dfsch_2types_8h.html" title="dfsch/types.h" alt="" coords="239,239,345,265"><area shape="rect" href="writer_8h.html" title="dfsch/writer.h" alt="" coords="111,239,215,265"></map>
</div>

<p>
<div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dynsection">
<p><center><img src="dfsch_2util_8h__dep__incl.png" border="0" usemap="#dfsch/util.hdep_map" alt=""></center>
<map name="dfsch/util.hdep_map">
<area shape="rect" href="cmdopts_8c.html" title="lib/cmdopts.c" alt="" coords="1028,84,1135,111"><area shape="rect" href="console_8c.html" title="lib/console.c" alt="" coords="1159,84,1257,111"><area shape="rect" href="sxml_8c.html" title="lib/sxml.c" alt="" coords="1281,84,1361,111"><area shape="rect" href="src_2util_8h.html" title="src/util.h" alt="" coords="1385,84,1460,111"><area shape="rect" href="eqhash_8c.html" title="src/eqhash.c" alt="" coords="1484,84,1585,111"><area shape="rect" href="threads_8c.html" title="lib/threads.c" alt="" coords="5,161,104,188"><area shape="rect" href="threads__mod_8c.html" title="lib/threads_mod.c" alt="" coords="128,161,264,188"><area shape="rect" href="unix_8c.html" title="lib/unix.c" alt="" coords="288,161,363,188"><area shape="rect" href="bignum_8c.html" title="src/bignum.c" alt="" coords="387,161,491,188"><area shape="rect" href="conditions_8c.html" title="src/conditions.c" alt="" coords="515,161,635,188"><area shape="rect" href="control_8c.html" title="src/control.c" alt="" coords="659,161,757,188"><area shape="rect" href="dfsch_8c.html" title="src/dfsch.c" alt="" coords="781,161,869,188"><area shape="rect" href="format_8c.html" title="src/format.c" alt="" coords="893,161,992,188"><area shape="rect" href="hash_8c.html" title="src/hash.c" alt="" coords="1016,161,1101,188"><area shape="rect" href="introspect_8c.html" title="src/introspect.c" alt="" coords="1125,161,1245,188"><area shape="rect" href="load_8c.html" title="src/load.c" alt="" coords="1269,161,1352,188"><area shape="rect" href="native_8c.html" title="src/native.c" alt="" coords="1376,161,1469,188"><area shape="rect" href="number_8c.html" title="src/number.c" alt="" coords="1493,161,1597,188"><area shape="rect" href="object_8c.html" title="src/object.c" alt="" coords="1621,161,1715,188"><area shape="rect" href="parse_8c.html" title="src/parse.c" alt="" coords="1739,161,1829,188"><area shape="rect" href="ports_8c.html" title="src/ports.c" alt="" coords="1853,161,1941,188"><area shape="rect" href="promise_8c.html" title="src/promise.c" alt="" coords="1965,161,2072,188"><area shape="rect" href="strings_8c.html" title="src/strings.c" alt="" coords="2096,161,2195,188"><area shape="rect" href="system_8c.html" title="src/system.c" alt="" coords="2219,161,2320,188"><area shape="rect" href="util_8c.html" title="src/util.c" alt="" coords="2344,161,2419,188"><area shape="rect" href="weak_8c.html" title="src/weak.c" alt="" coords="2443,161,2531,188"><area shape="rect" href="wrapper_8c.html" title="src/wrapper.c" alt="" coords="2555,161,2659,188"><area shape="rect" href="writer_8c.html" title="src/writer.c" alt="" coords="2683,161,2771,188"></map>
</div>

<p>
<a href="dfsch_2util_8h_source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#2cc1cd727da51aa8347f48133bdaa492">DFSCH_CREATE_RWLOCK</a>&nbsp;&nbsp;&nbsp;dfsch_create_finalized_mutex</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#a47f85d8fcb062a6b229918b424482fa">DFSCH_DESTROY_RWLOCK</a>(l)&nbsp;&nbsp;&nbsp;pthread_mutex_destroy(l)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#275e5a11747e3c97b900cab3ac3f89f0">DFSCH_INIT_RWLOCK</a>(l)&nbsp;&nbsp;&nbsp;pthread_mutex_init(l, NULL)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#d6f00edb0f31f6e8d4b49a6ccc5754ed">DFSCH_RWLOCK_INITIALIZER</a>&nbsp;&nbsp;&nbsp;PTHREAD_MUTEX_INITIALIZER</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#dc3566c4286a5b31a765dabe11deb87b">DFSCH_RWLOCK_RDLOCK</a>(l)&nbsp;&nbsp;&nbsp;pthread_mutex_lock(l)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#bdd281acbb77702ca1b9f49359ababa6">DFSCH_RWLOCK_UNLOCK</a>(l)&nbsp;&nbsp;&nbsp;pthread_mutex_unlock(l)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#5d0cff9602b4ec1bd186141d10f17501">DFSCH_RWLOCK_WRLOCK</a>(l)&nbsp;&nbsp;&nbsp;pthread_mutex_lock(l)</td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef pthread_mutex_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#3a2bf97f24910aad14f7a4e3211dd332">dfsch_rwlock_t</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef struct <a class="el" href="structdfsch__str__list__t.html">dfsch_str_list_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#51e2049883e72479c1ac114fd1c1b463">dfsch_str_list_t</a></td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#f05c77d1e4e7e9a0a998fb58940d7168">dfsch_ascii_strcasecmp</a> (char *a, char *b)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">pthread_cond_t *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#2566b277bea8f10976cb9b02aa569d50">dfsch_create_finalized_cvar</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">pthread_mutex_t *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#9144948df1f566c649db52a56828d60a">dfsch_create_finalized_mutex</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#c116c7944bda622dc0b4dadd20a649b6">dfsch_saprintf</a> (char *format,...)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#36a20ce05a0cbcd05b4917f05aba6893">dfsch_sl_append</a> (<a class="el" href="structdfsch__str__list__t.html">dfsch_str_list_t</a> *list, char *string)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structdfsch__str__list__t.html">dfsch_str_list_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#fcaba81f2a94e43a351171c884d9fcde">dfsch_sl_create</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#805a245db467bb79d92f568b7f79e74f">dfsch_sl_nappend</a> (<a class="el" href="structdfsch__str__list__t.html">dfsch_str_list_t</a> *list, char *string, size_t l)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#5b9c2e6389efbf7f8e8701d8658346d2">dfsch_sl_printf</a> (<a class="el" href="structdfsch__str__list__t.html">dfsch_str_list_t</a> *sl, char *format,...)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#26bf243a6b51bd233cbc2ea3e1501e3e">dfsch_sl_value</a> (<a class="el" href="structdfsch__str__list__t.html">dfsch_str_list_t</a> *list)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structdfsch__strbuf__t.html">dfsch_strbuf_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#26ee0e0b8ccb2720239f04423a42fbe8">dfsch_sl_value_strbuf</a> (<a class="el" href="structdfsch__str__list__t.html">dfsch_str_list_t</a> *list)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#347a24c0a6d5f50e3b89575a671e4379">dfsch_stracat</a> (char *a, char *b)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#fd1344553075b90343028baed65b01de">dfsch_stracpy</a> (char *x)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#49dbadbac1bf2d58dfcfd13f4686dc89">dfsch_strancat</a> (char *a, size_t an, char *b, size_t bn)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#1ec54d4efce4139d52e068a41dcbb9ed">dfsch_strancpy</a> (char *x, size_t n)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#93df6d48917be66a797655ccf2d4201d">dfsch_straquote</a> (char *s)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dfsch_2util_8h.html#48e5b3624a136c29a43e8100f78e9873">dfsch_vsaprintf</a> (char *format, va_list ap)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="2cc1cd727da51aa8347f48133bdaa492"></a><!-- doxytag: member="util.h::DFSCH_CREATE_RWLOCK" ref="2cc1cd727da51aa8347f48133bdaa492" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DFSCH_CREATE_RWLOCK&nbsp;&nbsp;&nbsp;dfsch_create_finalized_mutex          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="dfsch_2util_8h_source.html#l00072">72</a> of file <a class="el" href="dfsch_2util_8h_source.html">util.h</a>.</p>

<p>Referenced by <a class="el" href="weak_8c_source.html#l00300">dfsch_make_weak_key_hash()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a47f85d8fcb062a6b229918b424482fa"></a><!-- doxytag: member="util.h::DFSCH_DESTROY_RWLOCK" ref="a47f85d8fcb062a6b229918b424482fa" args="(l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DFSCH_DESTROY_RWLOCK          </td>
          <td>(</td>
          <td class="paramtype">l&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;pthread_mutex_destroy(l)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="dfsch_2util_8h_source.html#l00074">74</a> of file <a class="el" href="dfsch_2util_8h_source.html">util.h</a>.</p>

<p>Referenced by <a class="el" href="hash_8c_source.html#l00093">hash_finalizer()</a>.</p>

</div>
</div><p>
<a class="anchor" name="275e5a11747e3c97b900cab3ac3f89f0"></a><!-- doxytag: member="util.h::DFSCH_INIT_RWLOCK" ref="275e5a11747e3c97b900cab3ac3f89f0" args="(l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DFSCH_INIT_RWLOCK          </td>
          <td>(</td>
          <td class="paramtype">l&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;pthread_mutex_init(l, NULL)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="dfsch_2util_8h_source.html#l00073">73</a> of file <a class="el" href="dfsch_2util_8h_source.html">util.h</a>.</p>

<p>Referenced by <a class="el" href="hash_8c_source.html#l00098">dfsch_hash_make()</a>.</p>

</div>
</div><p>
<a class="anchor" name="d6f00edb0f31f6e8d4b49a6ccc5754ed"></a><!-- doxytag: member="util.h::DFSCH_RWLOCK_INITIALIZER" ref="d6f00edb0f31f6e8d4b49a6ccc5754ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DFSCH_RWLOCK_INITIALIZER&nbsp;&nbsp;&nbsp;PTHREAD_MUTEX_INITIALIZER          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="dfsch_2util_8h_source.html#l00068">68</a> of file <a class="el" href="dfsch_2util_8h_source.html">util.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="dc3566c4286a5b31a765dabe11deb87b"></a><!-- doxytag: member="util.h::DFSCH_RWLOCK_RDLOCK" ref="dc3566c4286a5b31a765dabe11deb87b" args="(l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DFSCH_RWLOCK_RDLOCK          </td>
          <td>(</td>
          <td class="paramtype">l&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;pthread_mutex_lock(l)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="dfsch_2util_8h_source.html#l00069">69</a> of file <a class="el" href="dfsch_2util_8h_source.html">util.h</a>.</p>

<p>Referenced by <a class="el" href="dfsch_8c_source.html#l02271">dfsch_env_get()</a>, <a class="el" href="hash_8c_source.html#l00388">dfsch_hash_2_alist()</a>, <a class="el" href="hash_8c_source.html#l00139">dfsch_hash_ref_fast()</a>, <a class="el" href="hash_8c_source.html#l00352">dfsch_hash_set_if_exists()</a>, <a class="el" href="dfsch_8c_source.html#l02229">lookup_impl()</a>, and <a class="el" href="weak_8c_source.html#l00333">weak_key_hash_ref()</a>.</p>

</div>
</div><p>
<a class="anchor" name="bdd281acbb77702ca1b9f49359ababa6"></a><!-- doxytag: member="util.h::DFSCH_RWLOCK_UNLOCK" ref="bdd281acbb77702ca1b9f49359ababa6" args="(l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DFSCH_RWLOCK_UNLOCK          </td>
          <td>(</td>
          <td class="paramtype">l&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;pthread_mutex_unlock(l)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="dfsch_2util_8h_source.html#l00071">71</a> of file <a class="el" href="dfsch_2util_8h_source.html">util.h</a>.</p>

<p>Referenced by <a class="el" href="dfsch_8c_source.html#l02345">dfsch_define()</a>, <a class="el" href="dfsch_8c_source.html#l02271">dfsch_env_get()</a>, <a class="el" href="hash_8c_source.html#l00388">dfsch_hash_2_alist()</a>, <a class="el" href="hash_8c_source.html#l00230">dfsch_hash_put()</a>, <a class="el" href="hash_8c_source.html#l00139">dfsch_hash_ref_fast()</a>, <a class="el" href="hash_8c_source.html#l00260">dfsch_hash_set()</a>, <a class="el" href="hash_8c_source.html#l00352">dfsch_hash_set_if_exists()</a>, <a class="el" href="hash_8c_source.html#l00306">dfsch_hash_unset()</a>, <a class="el" href="dfsch_8c_source.html#l02291">dfsch_set()</a>, <a class="el" href="dfsch_8c_source.html#l02324">dfsch_unset()</a>, <a class="el" href="dfsch_8c_source.html#l02229">lookup_impl()</a>, <a class="el" href="weak_8c_source.html#l00333">weak_key_hash_ref()</a>, and <a class="el" href="weak_8c_source.html#l00361">weak_key_hash_set()</a>.</p>

</div>
</div><p>
<a class="anchor" name="5d0cff9602b4ec1bd186141d10f17501"></a><!-- doxytag: member="util.h::DFSCH_RWLOCK_WRLOCK" ref="5d0cff9602b4ec1bd186141d10f17501" args="(l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DFSCH_RWLOCK_WRLOCK          </td>
          <td>(</td>
          <td class="paramtype">l&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;pthread_mutex_lock(l)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="dfsch_2util_8h_source.html#l00070">70</a> of file <a class="el" href="dfsch_2util_8h_source.html">util.h</a>.</p>

<p>Referenced by <a class="el" href="dfsch_8c_source.html#l02345">dfsch_define()</a>, <a class="el" href="hash_8c_source.html#l00230">dfsch_hash_put()</a>, <a class="el" href="hash_8c_source.html#l00260">dfsch_hash_set()</a>, <a class="el" href="hash_8c_source.html#l00306">dfsch_hash_unset()</a>, <a class="el" href="dfsch_8c_source.html#l02291">dfsch_set()</a>, <a class="el" href="dfsch_8c_source.html#l02324">dfsch_unset()</a>, and <a class="el" href="weak_8c_source.html#l00361">weak_key_hash_set()</a>.</p>

</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="3a2bf97f24910aad14f7a4e3211dd332"></a><!-- doxytag: member="util.h::dfsch_rwlock_t" ref="3a2bf97f24910aad14f7a4e3211dd332" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef pthread_mutex_t <a class="el" href="dfsch_2util_8h.html#3a2bf97f24910aad14f7a4e3211dd332">dfsch_rwlock_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="dfsch_2util_8h_source.html#l00075">75</a> of file <a class="el" href="dfsch_2util_8h_source.html">util.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="51e2049883e72479c1ac114fd1c1b463"></a><!-- doxytag: member="util.h::dfsch_str_list_t" ref="51e2049883e72479c1ac114fd1c1b463" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structdfsch__str__list__t.html">dfsch_str_list_t</a> <a class="el" href="structdfsch__str__list__t.html">dfsch_str_list_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="dfsch_2util_8h_source.html#l00033">33</a> of file <a class="el" href="dfsch_2util_8h_source.html">util.h</a>.</p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="f05c77d1e4e7e9a0a998fb58940d7168"></a><!-- doxytag: member="util.h::dfsch_ascii_strcasecmp" ref="f05c77d1e4e7e9a0a998fb58940d7168" args="(char *a, char *b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dfsch_ascii_strcasecmp           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>b</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="util_8c_source.html#l00177">177</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>

<p>References <a class="el" href="src_2util_8h_source.html#l00040">ASCII_tolower</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00177"></a>00177                                             { 
<a name="l00178"></a>00178   <span class="comment">/*</span>
<a name="l00179"></a>00179 <span class="comment">   * XXX: this function HASN'T same API as strcasecmp </span>
<a name="l00180"></a>00180 <span class="comment">   *      - it doesn't distinguish between &lt; and &gt;, only == and !=</span>
<a name="l00181"></a>00181 <span class="comment">   */</span>
<a name="l00182"></a>00182 
<a name="l00183"></a>00183   <span class="keywordflow">while</span> (*a &amp;&amp; *b){
<a name="l00184"></a>00184     <span class="keywordflow">if</span> (<a class="code" href="src_2util_8h.html#e6af34623579ee4c27a54919a4f51afe">ASCII_tolower</a>(*a) != <a class="code" href="src_2util_8h.html#e6af34623579ee4c27a54919a4f51afe">ASCII_tolower</a>(*b))
<a name="l00185"></a>00185       <span class="keywordflow">return</span> 1;
<a name="l00186"></a>00186     a++;
<a name="l00187"></a>00187     b++;
<a name="l00188"></a>00188   }
<a name="l00189"></a>00189   <span class="keywordflow">return</span> (*a != *b);
<a name="l00190"></a>00190 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="2566b277bea8f10976cb9b02aa569d50"></a><!-- doxytag: member="util.h::dfsch_create_finalized_cvar" ref="2566b277bea8f10976cb9b02aa569d50" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_cond_t* dfsch_create_finalized_cvar           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="util_8c_source.html#l00209">209</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>

<p>References <a class="el" href="util_8c_source.html#l00205">cvar_finalizer()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00209"></a>00209                                              {
<a name="l00210"></a>00210   pthread_cond_t* cvar = GC_MALLOC_ATOMIC(<span class="keyword">sizeof</span>(pthread_cond_t));
<a name="l00211"></a>00211 <span class="preprocessor">#ifdef DFSCH_THREADS_FINALIZE</span>
<a name="l00212"></a>00212 <span class="preprocessor"></span>  GC_REGISTER_FINALIZER_NO_ORDER(cvar, (GC_finalization_proc)<a class="code" href="util_8c.html#7411bcdc4afd54ac82baa882a6e86357">cvar_finalizer</a>,
<a name="l00213"></a>00213                                  NULL, NULL, NULL);
<a name="l00214"></a>00214 <span class="preprocessor">#endif</span>
<a name="l00215"></a>00215 <span class="preprocessor"></span>  pthread_cond_init(cvar, NULL);
<a name="l00216"></a>00216   <span class="keywordflow">return</span> cvar;
<a name="l00217"></a>00217 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="9144948df1f566c649db52a56828d60a"></a><!-- doxytag: member="util.h::dfsch_create_finalized_mutex" ref="9144948df1f566c649db52a56828d60a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t* dfsch_create_finalized_mutex           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="util_8c_source.html#l00196">196</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>

<p>References <a class="el" href="util_8c_source.html#l00192">mutex_finalizer()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00196"></a>00196                                                {
<a name="l00197"></a>00197   pthread_mutex_t* mutex = GC_MALLOC_ATOMIC(<span class="keyword">sizeof</span>(pthread_mutex_t));
<a name="l00198"></a>00198 <span class="preprocessor">#ifdef DFSCH_THREADS_FINALIZE</span>
<a name="l00199"></a>00199 <span class="preprocessor"></span>  GC_REGISTER_FINALIZER_NO_ORDER(mutex, (GC_finalization_proc)<a class="code" href="util_8c.html#35044b52894648cc4112a5f9a529b6b6">mutex_finalizer</a>,
<a name="l00200"></a>00200                                  NULL, NULL, NULL);
<a name="l00201"></a>00201 <span class="preprocessor">#endif</span>
<a name="l00202"></a>00202 <span class="preprocessor"></span>  pthread_mutex_init(mutex, NULL);
<a name="l00203"></a>00203   <span class="keywordflow">return</span> mutex;
<a name="l00204"></a>00204 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="c116c7944bda622dc0b4dadd20a649b6"></a><!-- doxytag: member="util.h::dfsch_saprintf" ref="c116c7944bda622dc0b4dadd20a649b6" args="(char *format,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* dfsch_saprintf           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="util_8c_source.html#l00255">255</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>

<p>References <a class="el" href="src_2util_8h_source.html#l00060">vsaprintf</a>.</p>

<p>Referenced by <a class="el" href="cdebug_8c_source.html#l00062">debug_main()</a>, <a class="el" href="format_8c_source.html#l00195">dfsch_format()</a>, <a class="el" href="number_8c_source.html#l00440">dfsch_number_format()</a>, <a class="el" href="conditions_8c_source.html#l00359">dfsch_type_error()</a>, <a class="el" href="sxml_8c_source.html#l00245">emit_attrs()</a>, <a class="el" href="sxml_8c_source.html#l00274">emit_element()</a>, and <a class="el" href="sxml_8c_source.html#l00309">emit_infoset()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00255"></a>00255                                        {
<a name="l00256"></a>00256   <span class="keywordtype">char</span>* ret;
<a name="l00257"></a>00257   va_list args;
<a name="l00258"></a>00258   va_start(args, format);
<a name="l00259"></a>00259   ret = <a class="code" href="src_2util_8h.html#c48aab4b07af5ce1705a7c266de55163">vsaprintf</a>(format, args);
<a name="l00260"></a>00260   va_end(args);
<a name="l00261"></a>00261   <span class="keywordflow">return</span> ret;
<a name="l00262"></a>00262 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="36a20ce05a0cbcd05b4917f05aba6893"></a><!-- doxytag: member="util.h::dfsch_sl_append" ref="36a20ce05a0cbcd05b4917f05aba6893" args="(dfsch_str_list_t *list, char *string)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dfsch_sl_append           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdfsch__str__list__t.html">dfsch_str_list_t</a> *&nbsp;</td>
          <td class="paramname"> <em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>string</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="util_8c_source.html#l00041">41</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>

<p>References <a class="el" href="src_2util_8h_source.html#l00030">dfsch_str_list_t::head</a>, <a class="el" href="src_2util_8h_source.html#l00032">dfsch_str_list_t::len</a>, <a class="el" href="src_2util_8h_source.html#l00036">str_li_t::len</a>, <a class="el" href="src_2util_8h_source.html#l00037">str_li_t::next</a>, <a class="el" href="src_2util_8h_source.html#l00035">str_li_t::str</a>, and <a class="el" href="src_2util_8h_source.html#l00031">dfsch_str_list_t::tail</a>.</p>

<p>Referenced by <a class="el" href="sxml_8c_source.html#l00323">dfsch_sxml_emit_cstr()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00041"></a>00041                                                     {
<a name="l00042"></a>00042   <a class="code" href="structstr__li__t.html">str_li_t</a>* i = GC_MALLOC(<span class="keyword">sizeof</span>(<a class="code" href="structstr__li__t.html">str_li_t</a>));
<a name="l00043"></a>00043 
<a name="l00044"></a>00044   i-&gt;<a class="code" href="structstr__li__t.html#07a0d7297d97a1b67ff18715af0c0ad4">str</a> = string;
<a name="l00045"></a>00045   i-&gt;<a class="code" href="structstr__li__t.html#9c6b40e352b98db9fd0d16e84b0094fe">len</a> = strlen(<span class="keywordtype">string</span>);
<a name="l00046"></a>00046   i-&gt;<a class="code" href="structstr__li__t.html#b17cf45a1e7a2d8df67c911f464c0c42">next</a> = NULL;
<a name="l00047"></a>00047 
<a name="l00048"></a>00048   <span class="keywordflow">if</span> (list-&gt;<a class="code" href="structdfsch__str__list__t.html#f311da1d43b543329d7d830a3a9d52af">head</a>){
<a name="l00049"></a>00049     list-&gt;<a class="code" href="structdfsch__str__list__t.html#fc5feb8db62b63aee4402c3e0ddd89cb">tail</a>-&gt;<a class="code" href="structstr__li__t.html#b17cf45a1e7a2d8df67c911f464c0c42">next</a> = i;
<a name="l00050"></a>00050     list-&gt;<a class="code" href="structdfsch__str__list__t.html#fc5feb8db62b63aee4402c3e0ddd89cb">tail</a> = i;
<a name="l00051"></a>00051     list-&gt;<a class="code" href="structdfsch__str__list__t.html#5c309a929e8f784e860fc298c67baece">len</a> = list-&gt;<a class="code" href="structdfsch__str__list__t.html#5c309a929e8f784e860fc298c67baece">len</a> + i-&gt;<a class="code" href="structstr__li__t.html#9c6b40e352b98db9fd0d16e84b0094fe">len</a>;
<a name="l00052"></a>00052   }<span class="keywordflow">else</span>{
<a name="l00053"></a>00053     list-&gt;<a class="code" href="structdfsch__str__list__t.html#f311da1d43b543329d7d830a3a9d52af">head</a> = list-&gt;<a class="code" href="structdfsch__str__list__t.html#fc5feb8db62b63aee4402c3e0ddd89cb">tail</a> = i;
<a name="l00054"></a>00054     list-&gt;<a class="code" href="structdfsch__str__list__t.html#5c309a929e8f784e860fc298c67baece">len</a> = i-&gt;<a class="code" href="structstr__li__t.html#9c6b40e352b98db9fd0d16e84b0094fe">len</a>;
<a name="l00055"></a>00055   }
<a name="l00056"></a>00056 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="fcaba81f2a94e43a351171c884d9fcde"></a><!-- doxytag: member="util.h::dfsch_sl_create" ref="fcaba81f2a94e43a351171c884d9fcde" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdfsch__str__list__t.html">dfsch_str_list_t</a>* dfsch_sl_create           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="util_8c_source.html#l00031">31</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>

<p>References <a class="el" href="src_2util_8h_source.html#l00030">dfsch_str_list_t::head</a>, <a class="el" href="src_2util_8h_source.html#l00032">dfsch_str_list_t::len</a>, and <a class="el" href="src_2util_8h_source.html#l00031">dfsch_str_list_t::tail</a>.</p>

<p>Referenced by <a class="el" href="sxml_8c_source.html#l00323">dfsch_sxml_emit_cstr()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00031"></a>00031                              {
<a name="l00032"></a>00032   <a class="code" href="structdfsch__str__list__t.html">str_list_t</a>* list = GC_MALLOC(<span class="keyword">sizeof</span>(<a class="code" href="structdfsch__str__list__t.html">str_list_t</a>));
<a name="l00033"></a>00033   
<a name="l00034"></a>00034   list-&gt;<a class="code" href="structdfsch__str__list__t.html#f311da1d43b543329d7d830a3a9d52af">head</a> = NULL;
<a name="l00035"></a>00035   list-&gt;<a class="code" href="structdfsch__str__list__t.html#fc5feb8db62b63aee4402c3e0ddd89cb">tail</a> = NULL;
<a name="l00036"></a>00036   list-&gt;<a class="code" href="structdfsch__str__list__t.html#5c309a929e8f784e860fc298c67baece">len</a> = 0;
<a name="l00037"></a>00037 
<a name="l00038"></a>00038   <span class="keywordflow">return</span> list;
<a name="l00039"></a>00039 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="805a245db467bb79d92f568b7f79e74f"></a><!-- doxytag: member="util.h::dfsch_sl_nappend" ref="805a245db467bb79d92f568b7f79e74f" args="(dfsch_str_list_t *list, char *string, size_t l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dfsch_sl_nappend           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdfsch__str__list__t.html">dfsch_str_list_t</a> *&nbsp;</td>
          <td class="paramname"> <em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>l</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="util_8c_source.html#l00057">57</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>

<p>References <a class="el" href="src_2util_8h_source.html#l00030">dfsch_str_list_t::head</a>, <a class="el" href="src_2util_8h_source.html#l00032">dfsch_str_list_t::len</a>, <a class="el" href="src_2util_8h_source.html#l00036">str_li_t::len</a>, <a class="el" href="src_2util_8h_source.html#l00037">str_li_t::next</a>, <a class="el" href="src_2util_8h_source.html#l00035">str_li_t::str</a>, and <a class="el" href="src_2util_8h_source.html#l00031">dfsch_str_list_t::tail</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00057"></a>00057                                                                {
<a name="l00058"></a>00058   <a class="code" href="structstr__li__t.html">str_li_t</a>* i = GC_MALLOC(<span class="keyword">sizeof</span>(<a class="code" href="structstr__li__t.html">str_li_t</a>));
<a name="l00059"></a>00059 
<a name="l00060"></a>00060   i-&gt;<a class="code" href="structstr__li__t.html#07a0d7297d97a1b67ff18715af0c0ad4">str</a> = string;
<a name="l00061"></a>00061   i-&gt;<a class="code" href="structstr__li__t.html#9c6b40e352b98db9fd0d16e84b0094fe">len</a> = l;
<a name="l00062"></a>00062   i-&gt;<a class="code" href="structstr__li__t.html#b17cf45a1e7a2d8df67c911f464c0c42">next</a> = NULL;
<a name="l00063"></a>00063 
<a name="l00064"></a>00064   <span class="keywordflow">if</span> (list-&gt;<a class="code" href="structdfsch__str__list__t.html#f311da1d43b543329d7d830a3a9d52af">head</a>){
<a name="l00065"></a>00065     list-&gt;<a class="code" href="structdfsch__str__list__t.html#fc5feb8db62b63aee4402c3e0ddd89cb">tail</a>-&gt;<a class="code" href="structstr__li__t.html#b17cf45a1e7a2d8df67c911f464c0c42">next</a> = i;
<a name="l00066"></a>00066     list-&gt;<a class="code" href="structdfsch__str__list__t.html#fc5feb8db62b63aee4402c3e0ddd89cb">tail</a> = i;
<a name="l00067"></a>00067     list-&gt;<a class="code" href="structdfsch__str__list__t.html#5c309a929e8f784e860fc298c67baece">len</a> = list-&gt;<a class="code" href="structdfsch__str__list__t.html#5c309a929e8f784e860fc298c67baece">len</a> + i-&gt;<a class="code" href="structstr__li__t.html#9c6b40e352b98db9fd0d16e84b0094fe">len</a>;
<a name="l00068"></a>00068   }<span class="keywordflow">else</span>{
<a name="l00069"></a>00069     list-&gt;<a class="code" href="structdfsch__str__list__t.html#f311da1d43b543329d7d830a3a9d52af">head</a> = list-&gt;<a class="code" href="structdfsch__str__list__t.html#fc5feb8db62b63aee4402c3e0ddd89cb">tail</a> = i;
<a name="l00070"></a>00070     list-&gt;<a class="code" href="structdfsch__str__list__t.html#5c309a929e8f784e860fc298c67baece">len</a> = i-&gt;<a class="code" href="structstr__li__t.html#9c6b40e352b98db9fd0d16e84b0094fe">len</a>;
<a name="l00071"></a>00071   }
<a name="l00072"></a>00072 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="5b9c2e6389efbf7f8e8701d8658346d2"></a><!-- doxytag: member="util.h::dfsch_sl_printf" ref="5b9c2e6389efbf7f8e8701d8658346d2" args="(dfsch_str_list_t *sl, char *format,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dfsch_sl_printf           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdfsch__str__list__t.html">dfsch_str_list_t</a> *&nbsp;</td>
          <td class="paramname"> <em>sl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="util_8c_source.html#l00074">74</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>

<p>References <a class="el" href="src_2util_8h_source.html#l00044">sl_append</a>, and <a class="el" href="src_2util_8h_source.html#l00060">vsaprintf</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00074"></a>00074                                                        {
<a name="l00075"></a>00075   <span class="keywordtype">char</span>* ret;
<a name="l00076"></a>00076   va_list args;
<a name="l00077"></a>00077   va_start(args, format);
<a name="l00078"></a>00078   ret = <a class="code" href="src_2util_8h.html#c48aab4b07af5ce1705a7c266de55163">vsaprintf</a>(format, args);
<a name="l00079"></a>00079   <a class="code" href="src_2util_8h.html#4e13611a313d895167bcbb5e5cc7ba78">sl_append</a>(sl, ret);
<a name="l00080"></a>00080   va_end(args);
<a name="l00081"></a>00081 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="26bf243a6b51bd233cbc2ea3e1501e3e"></a><!-- doxytag: member="util.h::dfsch_sl_value" ref="26bf243a6b51bd233cbc2ea3e1501e3e" args="(dfsch_str_list_t *list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* dfsch_sl_value           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdfsch__str__list__t.html">dfsch_str_list_t</a> *&nbsp;</td>
          <td class="paramname"> <em>list</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="util_8c_source.html#l00083">83</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>

<p>References <a class="el" href="src_2util_8h_source.html#l00030">dfsch_str_list_t::head</a>, <a class="el" href="src_2util_8h_source.html#l00036">str_li_t::len</a>, <a class="el" href="src_2util_8h_source.html#l00032">dfsch_str_list_t::len</a>, <a class="el" href="src_2util_8h_source.html#l00037">str_li_t::next</a>, and <a class="el" href="src_2util_8h_source.html#l00035">str_li_t::str</a>.</p>

<p>Referenced by <a class="el" href="sxml_8c_source.html#l00323">dfsch_sxml_emit_cstr()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00083"></a>00083                                       {
<a name="l00084"></a>00084   <span class="keywordtype">char</span> *buf = GC_MALLOC_ATOMIC(list-&gt;<a class="code" href="structdfsch__str__list__t.html#5c309a929e8f784e860fc298c67baece">len</a>+1);
<a name="l00085"></a>00085   <a class="code" href="structstr__li__t.html">str_li_t</a> *i = list-&gt;<a class="code" href="structdfsch__str__list__t.html#f311da1d43b543329d7d830a3a9d52af">head</a>;
<a name="l00086"></a>00086   <span class="keywordtype">char</span> *ptr = buf;
<a name="l00087"></a>00087 
<a name="l00088"></a>00088   <span class="keywordflow">while</span> (i){
<a name="l00089"></a>00089     memcpy(ptr, i-&gt;<a class="code" href="structstr__li__t.html#07a0d7297d97a1b67ff18715af0c0ad4">str</a>, i-&gt;<a class="code" href="structstr__li__t.html#9c6b40e352b98db9fd0d16e84b0094fe">len</a>);
<a name="l00090"></a>00090     ptr += i-&gt;<a class="code" href="structstr__li__t.html#9c6b40e352b98db9fd0d16e84b0094fe">len</a>;
<a name="l00091"></a>00091     i = i-&gt;<a class="code" href="structstr__li__t.html#b17cf45a1e7a2d8df67c911f464c0c42">next</a>;
<a name="l00092"></a>00092   }
<a name="l00093"></a>00093   
<a name="l00094"></a>00094   *ptr = <span class="charliteral">'\0'</span>;
<a name="l00095"></a>00095 
<a name="l00096"></a>00096   <span class="keywordflow">return</span> buf;
<a name="l00097"></a>00097 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="26ee0e0b8ccb2720239f04423a42fbe8"></a><!-- doxytag: member="util.h::dfsch_sl_value_strbuf" ref="26ee0e0b8ccb2720239f04423a42fbe8" args="(dfsch_str_list_t *list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdfsch__strbuf__t.html">dfsch_strbuf_t</a>* dfsch_sl_value_strbuf           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdfsch__str__list__t.html">dfsch_str_list_t</a> *&nbsp;</td>
          <td class="paramname"> <em>list</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="util_8c_source.html#l00098">98</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>

<p>References <a class="el" href="src_2util_8h_source.html#l00030">dfsch_str_list_t::head</a>, <a class="el" href="src_2util_8h_source.html#l00036">str_li_t::len</a>, <a class="el" href="strings_8h_source.html#l00033">dfsch_strbuf_t::len</a>, <a class="el" href="src_2util_8h_source.html#l00032">dfsch_str_list_t::len</a>, <a class="el" href="src_2util_8h_source.html#l00037">str_li_t::next</a>, <a class="el" href="strings_8h_source.html#l00032">dfsch_strbuf_t::ptr</a>, and <a class="el" href="src_2util_8h_source.html#l00035">str_li_t::str</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00098"></a>00098                                                        {
<a name="l00099"></a>00099   <a class="code" href="structdfsch__strbuf__t.html">dfsch_strbuf_t</a> *buf = GC_MALLOC_ATOMIC(<span class="keyword">sizeof</span>(<a class="code" href="structdfsch__strbuf__t.html">dfsch_strbuf_t</a>) + 
<a name="l00100"></a>00100                                          list-&gt;<a class="code" href="structdfsch__str__list__t.html#5c309a929e8f784e860fc298c67baece">len</a> + 1);
<a name="l00101"></a>00101   <a class="code" href="structstr__li__t.html">str_li_t</a> *i = list-&gt;<a class="code" href="structdfsch__str__list__t.html#f311da1d43b543329d7d830a3a9d52af">head</a>;
<a name="l00102"></a>00102   <span class="keywordtype">char</span> *ptr;
<a name="l00103"></a>00103 
<a name="l00104"></a>00104   buf-&gt;<a class="code" href="structdfsch__strbuf__t.html#503325ee2c4675cd5a62432ec75e65b6">ptr</a> = buf + <span class="keyword">sizeof</span>(<a class="code" href="structdfsch__strbuf__t.html">dfsch_strbuf_t</a>);
<a name="l00105"></a>00105   buf-&gt;<a class="code" href="structdfsch__strbuf__t.html#2f55379d5cfe8be1cf6b3fda39183772">len</a> = list-&gt;<a class="code" href="structdfsch__str__list__t.html#5c309a929e8f784e860fc298c67baece">len</a>;
<a name="l00106"></a>00106   ptr = buf-&gt;<a class="code" href="structdfsch__strbuf__t.html#503325ee2c4675cd5a62432ec75e65b6">ptr</a>;
<a name="l00107"></a>00107 
<a name="l00108"></a>00108   <span class="keywordflow">while</span> (i){
<a name="l00109"></a>00109     memcpy(ptr, i-&gt;<a class="code" href="structstr__li__t.html#07a0d7297d97a1b67ff18715af0c0ad4">str</a>, i-&gt;<a class="code" href="structstr__li__t.html#9c6b40e352b98db9fd0d16e84b0094fe">len</a>);
<a name="l00110"></a>00110     ptr += i-&gt;<a class="code" href="structstr__li__t.html#9c6b40e352b98db9fd0d16e84b0094fe">len</a>;
<a name="l00111"></a>00111     i = i-&gt;<a class="code" href="structstr__li__t.html#b17cf45a1e7a2d8df67c911f464c0c42">next</a>;
<a name="l00112"></a>00112   }
<a name="l00113"></a>00113   
<a name="l00114"></a>00114   *ptr = <span class="charliteral">'\0'</span>;
<a name="l00115"></a>00115 
<a name="l00116"></a>00116   <span class="keywordflow">return</span> buf;
<a name="l00117"></a>00117 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="347a24c0a6d5f50e3b89575a671e4379"></a><!-- doxytag: member="util.h::dfsch_stracat" ref="347a24c0a6d5f50e3b89575a671e4379" args="(char *a, char *b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* dfsch_stracat           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>b</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="util_8c_source.html#l00119">119</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00119"></a>00119                                      {
<a name="l00120"></a>00120   <span class="keywordtype">size_t</span> s = strlen(a)+strlen(b)+1;
<a name="l00121"></a>00121   <span class="keywordtype">char</span>* o = GC_MALLOC_ATOMIC(s);
<a name="l00122"></a>00122   strncpy(o,a,s);
<a name="l00123"></a>00123   strncat(o,b,s);
<a name="l00124"></a>00124   <span class="keywordflow">return</span> o;
<a name="l00125"></a>00125 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="fd1344553075b90343028baed65b01de"></a><!-- doxytag: member="util.h::dfsch_stracpy" ref="fd1344553075b90343028baed65b01de" args="(char *x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* dfsch_stracpy           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>x</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="util_8c_source.html#l00135">135</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>

<p>Referenced by <a class="el" href="cmdopts_8c_source.html#l00072">dfsch_cmdopts_add_option()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00135"></a>00135                             {
<a name="l00136"></a>00136   <span class="keywordtype">char</span> *b;
<a name="l00137"></a>00137   <span class="keywordtype">size_t</span> s = strlen(x)+1;
<a name="l00138"></a>00138   b = GC_MALLOC_ATOMIC(s);
<a name="l00139"></a>00139   strncpy(b,x,s);
<a name="l00140"></a>00140   <span class="keywordflow">return</span> b;
<a name="l00141"></a>00141 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="49dbadbac1bf2d58dfcfd13f4686dc89"></a><!-- doxytag: member="util.h::dfsch_strancat" ref="49dbadbac1bf2d58dfcfd13f4686dc89" args="(char *a, size_t an, char *b, size_t bn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* dfsch_strancat           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>an</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>bn</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="util_8c_source.html#l00127">127</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00127"></a>00127                                                             {
<a name="l00128"></a>00128   <span class="keywordtype">char</span>* o = GC_MALLOC_ATOMIC(an + bn + 1);
<a name="l00129"></a>00129   memcpy(o, a, an);
<a name="l00130"></a>00130   memcpy(o + an, b, bn);
<a name="l00131"></a>00131   o[an+bn] = 0;
<a name="l00132"></a>00132   <span class="keywordflow">return</span> o;
<a name="l00133"></a>00133 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="1ec54d4efce4139d52e068a41dcbb9ed"></a><!-- doxytag: member="util.h::dfsch_strancpy" ref="1ec54d4efce4139d52e068a41dcbb9ed" args="(char *x, size_t n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* dfsch_strancpy           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>n</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="util_8c_source.html#l00142">142</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00142"></a>00142                                        {
<a name="l00143"></a>00143   <span class="keywordtype">char</span> *b;
<a name="l00144"></a>00144   <span class="keywordtype">size_t</span> s = n+1;
<a name="l00145"></a>00145   b = GC_MALLOC_ATOMIC(s);
<a name="l00146"></a>00146   strncpy(b,x,s-1);
<a name="l00147"></a>00147   b[s-1]=0;
<a name="l00148"></a>00148   <span class="keywordflow">return</span> b;
<a name="l00149"></a>00149 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="93df6d48917be66a797655ccf2d4201d"></a><!-- doxytag: member="util.h::dfsch_straquote" ref="93df6d48917be66a797655ccf2d4201d" args="(char *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* dfsch_straquote           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="util_8c_source.html#l00150">150</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00150"></a>00150                               {
<a name="l00151"></a>00151   <span class="keywordtype">char</span> *b = GC_MALLOC_ATOMIC(strlen(s)*2+3); <span class="comment">// worst case, to lazy to optimize</span>
<a name="l00152"></a>00152   <span class="keywordtype">char</span> *i = b;
<a name="l00153"></a>00153 
<a name="l00154"></a>00154   *i=<span class="charliteral">'"'</span>;
<a name="l00155"></a>00155   i++;
<a name="l00156"></a>00156 
<a name="l00157"></a>00157   <span class="keywordflow">while</span> (*s){
<a name="l00158"></a>00158     <span class="keywordflow">switch</span> (*s){
<a name="l00159"></a>00159     <span class="keywordflow">case</span> <span class="charliteral">'"'</span>:
<a name="l00160"></a>00160       i[0]=<span class="charliteral">'\\'</span>;
<a name="l00161"></a>00161       i[1]=<span class="charliteral">'"'</span>;
<a name="l00162"></a>00162       i+=2;
<a name="l00163"></a>00163     <span class="keywordflow">default</span>:
<a name="l00164"></a>00164       *i = *s;
<a name="l00165"></a>00165       ++i;
<a name="l00166"></a>00166     }
<a name="l00167"></a>00167     s++;
<a name="l00168"></a>00168   }
<a name="l00169"></a>00169 
<a name="l00170"></a>00170   *i=<span class="charliteral">'"'</span>;
<a name="l00171"></a>00171   i[1]=0;
<a name="l00172"></a>00172 
<a name="l00173"></a>00173   <span class="keywordflow">return</span> b;
<a name="l00174"></a>00174 
<a name="l00175"></a>00175 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="48e5b3624a136c29a43e8100f78e9873"></a><!-- doxytag: member="util.h::dfsch_vsaprintf" ref="48e5b3624a136c29a43e8100f78e9873" args="(char *format, va_list ap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* dfsch_vsaprintf           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&nbsp;</td>
          <td class="paramname"> <em>ap</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="util_8c_source.html#l00233">233</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00233"></a>00233                                                {
<a name="l00234"></a>00234   <span class="keywordtype">char</span>* buf = GC_MALLOC_ATOMIC(128);
<a name="l00235"></a>00235   <span class="keywordtype">int</span> r;
<a name="l00236"></a>00236   va_list ap2;
<a name="l00237"></a>00237 
<a name="l00238"></a>00238   va_copy(ap2, ap);
<a name="l00239"></a>00239   r=vsnprintf(buf, 128, format, ap2);
<a name="l00240"></a>00240   va_end(ap2);
<a name="l00241"></a>00241   <span class="keywordflow">if</span> (r&lt;0){
<a name="l00242"></a>00242     <span class="keywordflow">return</span> NULL;
<a name="l00243"></a>00243   }
<a name="l00244"></a>00244   <span class="keywordflow">if</span> (r&gt;=128){
<a name="l00245"></a>00245     buf = GC_REALLOC(buf, r+1);
<a name="l00246"></a>00246 
<a name="l00247"></a>00247     r = vsnprintf(buf, r+1, format, ap);
<a name="l00248"></a>00248     <span class="keywordflow">if</span> (r&lt;0){
<a name="l00249"></a>00249       <span class="keywordflow">return</span> NULL;
<a name="l00250"></a>00250     }
<a name="l00251"></a>00251   }
<a name="l00252"></a>00252 
<a name="l00253"></a>00253   <span class="keywordflow">return</span> buf;
<a name="l00254"></a>00254 }
</pre></div>
<p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Jul 3 16:02:14 2009 for dfsch by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
